\hypertarget{delegate_8c}{}\doxysection{source/utilities/language\+\_\+extension/delegate.c File Reference}
\label{delegate_8c}\index{source/utilities/language\_extension/delegate.c@{source/utilities/language\_extension/delegate.c}}
{\ttfamily \#include \char`\"{}./delegate.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{delegate_8c_a45508217cc61797be3d350fb14b6d1df}{\+\_\+\+\_\+\+VSF\+\_\+\+DELEGATE\+\_\+\+CLASS\+\_\+\+IMPLEMENT}}
\item 
\#define \mbox{\hyperlink{delegate_8c_ac1a0d1a906b4aac21eeb4455b6a1ab8e}{EVENT\+\_\+\+RT\+\_\+\+UNREGISTER}}~4
\item 
\#define \mbox{\hyperlink{delegate_8c_a170ed34cb45d3bd351735c7521ba7aa6}{vsf\+\_\+this}}~($\ast$this\+\_\+ptr)
\item 
\#define \mbox{\hyperlink{delegate_8c_a9e9a105a7440c9c7858d4d832022a8a6}{RAISE\+\_\+\+EVENT\+\_\+\+START}}~0
\item 
\#define \mbox{\hyperlink{delegate_8c_a26f70fb150925c19b6f7d28c1056ad4b}{RAISE\+\_\+\+EVENT\+\_\+\+CHECK\+\_\+\+HANDLER}}~1
\item 
\#define \mbox{\hyperlink{delegate_8c_a72831142e6aec6774d03eb58ebba52cf}{RAISE\+\_\+\+EVENT\+\_\+\+RUN\+\_\+\+HANDLER}}~2
\item 
\#define \mbox{\hyperlink{delegate_8c_a1cced696c32470c45e907ee34a944965}{RAISE\+\_\+\+EVENT\+\_\+\+RESET\+\_\+\+FSM}}()~do \{ vsf\+\_\+this.\+ch\+State = 0; \} while (0)
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
delegate\+\_\+t $\ast$ \mbox{\hyperlink{delegate_8c_a887c64d094ca64f80a4cb978233745a9}{delegate\+\_\+init}} (delegate\+\_\+t $\ast$event\+\_\+ptr)
\begin{DoxyCompactList}\small\item\em initialize event ! \end{DoxyCompactList}\item 
delegate\+\_\+handler\+\_\+t $\ast$ \mbox{\hyperlink{delegate_8c_afa2821e026b078362e07b3f5717370d1}{delegate\+\_\+handler\+\_\+init}} (delegate\+\_\+handler\+\_\+t $\ast$handler\+\_\+ptr, \mbox{\hyperlink{delegate_8h_ac317712e68aea34b96f8ccbb0af09fa5}{delegate\+\_\+handler\+\_\+func\+\_\+t}} $\ast$routine\+\_\+fn, void $\ast$arg\+\_\+ptr)
\begin{DoxyCompactList}\small\item\em initialize event handler item ! \end{DoxyCompactList}\item 
\mbox{\hyperlink{____type_8h_ac6c55e737799b5e73899ccfae13b98e4}{vsf\+\_\+err\+\_\+t}} \mbox{\hyperlink{delegate_8c_a10372e3a177fca411dc43029fd7d702a}{register\+\_\+delegate\+\_\+handler}} (delegate\+\_\+t $\ast$event\+\_\+ptr, delegate\+\_\+handler\+\_\+t $\ast$handler\+\_\+ptr)
\begin{DoxyCompactList}\small\item\em register event handler to specified event ! \end{DoxyCompactList}\item 
\mbox{\hyperlink{____type_8h_ac6c55e737799b5e73899ccfae13b98e4}{vsf\+\_\+err\+\_\+t}} \mbox{\hyperlink{delegate_8c_a1b47350e48c426a0f9106a0b45b7f5a5}{unregister\+\_\+delegate\+\_\+handler}} (delegate\+\_\+t $\ast$event\+\_\+ptr, delegate\+\_\+handler\+\_\+t $\ast$handler\+\_\+ptr)
\begin{DoxyCompactList}\small\item\em unregister a specified event handler ! \end{DoxyCompactList}\item 
\mbox{\hyperlink{vsf__fsm_8h_ae61ab5e1d66a489d89fa8786e6b5f64b}{fsm\+\_\+rt\+\_\+t}} \mbox{\hyperlink{delegate_8c_a2b6fe7b8e5d689bac8b2c69febdf1972}{invoke\+\_\+delegate}} (delegate\+\_\+t $\ast$event\+\_\+ptr, void $\ast$param\+\_\+ptr)
\begin{DoxyCompactList}\small\item\em raise target event ! \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{delegate_8c_a45508217cc61797be3d350fb14b6d1df}\label{delegate_8c_a45508217cc61797be3d350fb14b6d1df}} 
\index{delegate.c@{delegate.c}!\_\_VSF\_DELEGATE\_CLASS\_IMPLEMENT@{\_\_VSF\_DELEGATE\_CLASS\_IMPLEMENT}}
\index{\_\_VSF\_DELEGATE\_CLASS\_IMPLEMENT@{\_\_VSF\_DELEGATE\_CLASS\_IMPLEMENT}!delegate.c@{delegate.c}}
\doxysubsubsection{\texorpdfstring{\_\_VSF\_DELEGATE\_CLASS\_IMPLEMENT}{\_\_VSF\_DELEGATE\_CLASS\_IMPLEMENT}}
{\footnotesize\ttfamily \#define \+\_\+\+\_\+\+VSF\+\_\+\+DELEGATE\+\_\+\+CLASS\+\_\+\+IMPLEMENT}

\mbox{\Hypertarget{delegate_8c_ac1a0d1a906b4aac21eeb4455b6a1ab8e}\label{delegate_8c_ac1a0d1a906b4aac21eeb4455b6a1ab8e}} 
\index{delegate.c@{delegate.c}!EVENT\_RT\_UNREGISTER@{EVENT\_RT\_UNREGISTER}}
\index{EVENT\_RT\_UNREGISTER@{EVENT\_RT\_UNREGISTER}!delegate.c@{delegate.c}}
\doxysubsubsection{\texorpdfstring{EVENT\_RT\_UNREGISTER}{EVENT\_RT\_UNREGISTER}}
{\footnotesize\ttfamily \#define EVENT\+\_\+\+RT\+\_\+\+UNREGISTER~4}

\mbox{\Hypertarget{delegate_8c_a170ed34cb45d3bd351735c7521ba7aa6}\label{delegate_8c_a170ed34cb45d3bd351735c7521ba7aa6}} 
\index{delegate.c@{delegate.c}!vsf\_this@{vsf\_this}}
\index{vsf\_this@{vsf\_this}!delegate.c@{delegate.c}}
\doxysubsubsection{\texorpdfstring{vsf\_this}{vsf\_this}}
{\footnotesize\ttfamily \#define vsf\+\_\+this~($\ast$this\+\_\+ptr)}

\mbox{\Hypertarget{delegate_8c_a9e9a105a7440c9c7858d4d832022a8a6}\label{delegate_8c_a9e9a105a7440c9c7858d4d832022a8a6}} 
\index{delegate.c@{delegate.c}!RAISE\_EVENT\_START@{RAISE\_EVENT\_START}}
\index{RAISE\_EVENT\_START@{RAISE\_EVENT\_START}!delegate.c@{delegate.c}}
\doxysubsubsection{\texorpdfstring{RAISE\_EVENT\_START}{RAISE\_EVENT\_START}}
{\footnotesize\ttfamily \#define RAISE\+\_\+\+EVENT\+\_\+\+START~0}

\mbox{\Hypertarget{delegate_8c_a26f70fb150925c19b6f7d28c1056ad4b}\label{delegate_8c_a26f70fb150925c19b6f7d28c1056ad4b}} 
\index{delegate.c@{delegate.c}!RAISE\_EVENT\_CHECK\_HANDLER@{RAISE\_EVENT\_CHECK\_HANDLER}}
\index{RAISE\_EVENT\_CHECK\_HANDLER@{RAISE\_EVENT\_CHECK\_HANDLER}!delegate.c@{delegate.c}}
\doxysubsubsection{\texorpdfstring{RAISE\_EVENT\_CHECK\_HANDLER}{RAISE\_EVENT\_CHECK\_HANDLER}}
{\footnotesize\ttfamily \#define RAISE\+\_\+\+EVENT\+\_\+\+CHECK\+\_\+\+HANDLER~1}

\mbox{\Hypertarget{delegate_8c_a72831142e6aec6774d03eb58ebba52cf}\label{delegate_8c_a72831142e6aec6774d03eb58ebba52cf}} 
\index{delegate.c@{delegate.c}!RAISE\_EVENT\_RUN\_HANDLER@{RAISE\_EVENT\_RUN\_HANDLER}}
\index{RAISE\_EVENT\_RUN\_HANDLER@{RAISE\_EVENT\_RUN\_HANDLER}!delegate.c@{delegate.c}}
\doxysubsubsection{\texorpdfstring{RAISE\_EVENT\_RUN\_HANDLER}{RAISE\_EVENT\_RUN\_HANDLER}}
{\footnotesize\ttfamily \#define RAISE\+\_\+\+EVENT\+\_\+\+RUN\+\_\+\+HANDLER~2}

\mbox{\Hypertarget{delegate_8c_a1cced696c32470c45e907ee34a944965}\label{delegate_8c_a1cced696c32470c45e907ee34a944965}} 
\index{delegate.c@{delegate.c}!RAISE\_EVENT\_RESET\_FSM@{RAISE\_EVENT\_RESET\_FSM}}
\index{RAISE\_EVENT\_RESET\_FSM@{RAISE\_EVENT\_RESET\_FSM}!delegate.c@{delegate.c}}
\doxysubsubsection{\texorpdfstring{RAISE\_EVENT\_RESET\_FSM}{RAISE\_EVENT\_RESET\_FSM}}
{\footnotesize\ttfamily \#define RAISE\+\_\+\+EVENT\+\_\+\+RESET\+\_\+\+FSM(\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})~do \{ vsf\+\_\+this.\+ch\+State = 0; \} while (0)}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{delegate_8c_a887c64d094ca64f80a4cb978233745a9}\label{delegate_8c_a887c64d094ca64f80a4cb978233745a9}} 
\index{delegate.c@{delegate.c}!delegate\_init@{delegate\_init}}
\index{delegate\_init@{delegate\_init}!delegate.c@{delegate.c}}
\doxysubsubsection{\texorpdfstring{delegate\_init()}{delegate\_init()}}
{\footnotesize\ttfamily delegate\+\_\+t$\ast$ delegate\+\_\+init (\begin{DoxyParamCaption}\item[{delegate\+\_\+t $\ast$}]{event\+\_\+ptr }\end{DoxyParamCaption})}



initialize event ! 


\begin{DoxyParams}{Parameters}
{\em event\+\_\+ptr} & target event ! \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the address of event item 
\end{DoxyReturn}
\mbox{\Hypertarget{delegate_8c_afa2821e026b078362e07b3f5717370d1}\label{delegate_8c_afa2821e026b078362e07b3f5717370d1}} 
\index{delegate.c@{delegate.c}!delegate\_handler\_init@{delegate\_handler\_init}}
\index{delegate\_handler\_init@{delegate\_handler\_init}!delegate.c@{delegate.c}}
\doxysubsubsection{\texorpdfstring{delegate\_handler\_init()}{delegate\_handler\_init()}}
{\footnotesize\ttfamily delegate\+\_\+handler\+\_\+t$\ast$ delegate\+\_\+handler\+\_\+init (\begin{DoxyParamCaption}\item[{delegate\+\_\+handler\+\_\+t $\ast$}]{handler\+\_\+ptr,  }\item[{\mbox{\hyperlink{delegate_8h_ac317712e68aea34b96f8ccbb0af09fa5}{delegate\+\_\+handler\+\_\+func\+\_\+t}} $\ast$}]{routine\+\_\+fn,  }\item[{void $\ast$}]{arg\+\_\+ptr }\end{DoxyParamCaption})}



initialize event handler item ! 


\begin{DoxyParams}{Parameters}
{\em handler\+\_\+ptr} & the target event handler item !\\
\hline
{\em routine\+\_\+fn} & event handler routine !\\
\hline
{\em arg\+\_\+ptr} & handler extra arguments ! \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the address of event handler item 
\end{DoxyReturn}
\mbox{\Hypertarget{delegate_8c_a10372e3a177fca411dc43029fd7d702a}\label{delegate_8c_a10372e3a177fca411dc43029fd7d702a}} 
\index{delegate.c@{delegate.c}!register\_delegate\_handler@{register\_delegate\_handler}}
\index{register\_delegate\_handler@{register\_delegate\_handler}!delegate.c@{delegate.c}}
\doxysubsubsection{\texorpdfstring{register\_delegate\_handler()}{register\_delegate\_handler()}}
{\footnotesize\ttfamily \mbox{\hyperlink{____type_8h_ac6c55e737799b5e73899ccfae13b98e4}{vsf\+\_\+err\+\_\+t}} register\+\_\+delegate\+\_\+handler (\begin{DoxyParamCaption}\item[{delegate\+\_\+t $\ast$}]{event\+\_\+ptr,  }\item[{delegate\+\_\+handler\+\_\+t $\ast$}]{handler\+\_\+ptr }\end{DoxyParamCaption})}



register event handler to specified event ! 


\begin{DoxyParams}{Parameters}
{\em event\+\_\+ptr} & target event !\\
\hline
{\em handler\+\_\+ptr} & target event handler ! \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
access result 
\end{DoxyReturn}
search ready list

safe to remove

add handler to the ready list\mbox{\Hypertarget{delegate_8c_a1b47350e48c426a0f9106a0b45b7f5a5}\label{delegate_8c_a1b47350e48c426a0f9106a0b45b7f5a5}} 
\index{delegate.c@{delegate.c}!unregister\_delegate\_handler@{unregister\_delegate\_handler}}
\index{unregister\_delegate\_handler@{unregister\_delegate\_handler}!delegate.c@{delegate.c}}
\doxysubsubsection{\texorpdfstring{unregister\_delegate\_handler()}{unregister\_delegate\_handler()}}
{\footnotesize\ttfamily \mbox{\hyperlink{____type_8h_ac6c55e737799b5e73899ccfae13b98e4}{vsf\+\_\+err\+\_\+t}} unregister\+\_\+delegate\+\_\+handler (\begin{DoxyParamCaption}\item[{delegate\+\_\+t $\ast$}]{event\+\_\+ptr,  }\item[{delegate\+\_\+handler\+\_\+t $\ast$}]{handler\+\_\+ptr }\end{DoxyParamCaption})}



unregister a specified event handler ! 


\begin{DoxyParams}{Parameters}
{\em event\+\_\+ptr} & target event !\\
\hline
{\em handler\+\_\+ptr} & target event handler ! \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
access result 
\end{DoxyReturn}
search ready list

safe to remove

search ready list

safe to remove\mbox{\Hypertarget{delegate_8c_a2b6fe7b8e5d689bac8b2c69febdf1972}\label{delegate_8c_a2b6fe7b8e5d689bac8b2c69febdf1972}} 
\index{delegate.c@{delegate.c}!invoke\_delegate@{invoke\_delegate}}
\index{invoke\_delegate@{invoke\_delegate}!delegate.c@{delegate.c}}
\doxysubsubsection{\texorpdfstring{invoke\_delegate()}{invoke\_delegate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{vsf__fsm_8h_ae61ab5e1d66a489d89fa8786e6b5f64b}{fsm\+\_\+rt\+\_\+t}} invoke\+\_\+delegate (\begin{DoxyParamCaption}\item[{delegate\+\_\+t $\ast$}]{event\+\_\+ptr,  }\item[{void $\ast$}]{param\+\_\+ptr }\end{DoxyParamCaption})}



raise target event ! 


\begin{DoxyParams}{Parameters}
{\em event\+\_\+ptr} & the target event !\\
\hline
{\em param\+\_\+ptr} & event parameter ! \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
access result 
\end{DoxyReturn}
nothing to do

initialize state

finish visiting the ready list

complete

run the event handler

$<$ get next item

return EVENT\+\_\+\+RT\+\_\+\+UNREGISTER means event handler could be removed